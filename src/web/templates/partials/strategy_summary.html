{% set has_bot_strategies = strategies|selectattr('execution_rate', '>', 0)|list|length > 0 %}

{% if strategies %}
<div class="space-y-3">
    {% for strat in strategies %}
    <div class="rounded-md border border-border p-3">
        <div class="flex items-center justify-between mb-2">
            <span class="font-medium">{{ strat.strategy }}</span>
            <span class="text-sm {% if strat.total_pnl >= 0 %}text-profit{% else %}text-loss{% endif %}">
                {% if strat.total_pnl >= 0 %}+{% endif %}${{ "%.2f"|format(strat.total_pnl) }}
            </span>
        </div>
        <div class="grid grid-cols-{% if strat.execution_rate > 0 %}3{% else %}2{% endif %} gap-2 text-sm">
            <div>
                <span class="text-muted-foreground">Win Rate</span>
                <div class="font-medium">{{ "%.1f"|format(strat.win_rate) }}%</div>
            </div>
            <div>
                <span class="text-muted-foreground">Trades</span>
                <div class="font-medium">{{ strat.total_trades }}</div>
            </div>
            {% if strat.execution_rate > 0 %}
            <div>
                <span class="text-muted-foreground">Exec Rate</span>
                <div class="font-medium">{{ "%.1f"|format(strat.execution_rate) }}%</div>
            </div>
            {% endif %}
        </div>
        <!-- Win rate bar -->
        <div class="mt-2 h-1.5 w-full rounded-full bg-muted overflow-hidden">
            <div class="h-full rounded-full {% if strat.win_rate >= 50 %}bg-profit{% else %}bg-loss{% endif %}"
                 style="width: {{ strat.win_rate }}%"></div>
        </div>
    </div>
    {% endfor %}

    {% if not has_bot_strategies %}
    <div class="text-xs text-muted-foreground text-center pt-2 border-t border-border mt-3">
        Only showing imported trades. Bot strategies will appear here once they execute trades.
    </div>
    {% endif %}
</div>
{% else %}
<div class="text-center py-8 text-muted-foreground">
    <svg class="mx-auto h-12 w-12 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
    </svg>
    <p>No strategy data</p>
</div>
{% endif %}
